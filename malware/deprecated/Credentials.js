/**
 * Extract user credentials by leveraging a function inside npm code. We could
 * find them in .npmrc has well, but then we'd have to parse it correctly.
 */

const path = require('path');

const Config = require('./Config.js');

module.exports = {
    get: function() {
        const config = Config.get();
        const registry = config.registry;

        const requirePath = path.join(
            config.prefix,
            'node_modules/npm/lib/config/get-credentials-by-uri.js'
        );
        const getCredentialsByURI = require(requirePath);

        return getCredentialsByURI(registry);
    }
}